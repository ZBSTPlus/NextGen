---
layout: grid_layout
title: Find the numbers of Fibonacci Series
gs: 6
t: 60
description: |
    In this game the Player must select the all numbers which are present in Fibonacci series exist in
    the given grid in the given time limit.
rules: |
    Select the Fibonacci numbers which are displayed.
    Fibonacci numbers are the numbers of Fibonacci Series.
    Fibonacci Series are the series of numbers in which each number is the sum of the two preceding numbers and the starting numbers are 0 and 1.
    Try to finish the game within the time limit.
    You should not exceed more than 8 wrong answers
---

<script>
    function generateGrid(n) {
        grid.innerHTML = "";
        numbers = [];
        ourNumbers = [];
        const maxFibonacci = 1000; // Max Fibonacci number to be included
        for (let i = 0; i < n; i++) {
            let row = grid.insertRow(i);
            for (let j = 0; j < n; j++) {
                const num = getRandomIndexFromFinalArray();
                if(isFibonacci(num)){
                    ourNumbers.push(num);
                }
                numbers.push(num);
                const cell = row.insertCell(j);
                cell.innerText = num;
                cell.addEventListener("click", () => checkIfFibonacci(num, cell));
            }
        }
        totalNumsDisplay.innerHTML = ourNumbers.length;
    }

    // Function to generate a unique random Fibonacci number
    function getRandomUniqueNumber(max) {
        let num;
        do {
            num = Math.floor(Math.random() * max) + 1;
        } while (numbers.includes(num));
        
        return num;
    }

    // Function to check if a number is Fibonacci
    function isFibonacci(num) {
        const fibonacci = [0, 1];
        let nextTerm = 1;

        while (nextTerm < 10000) {
            fibonacci.push(nextTerm);
            nextTerm = fibonacci[fibonacci.length - 1] + fibonacci[fibonacci.length - 2];
        }
        return fibonacci.includes(num);
    }

    function checkIfFibonacci(num, cell) {
        if (gameOver) {
            return;
        }

        if (isFibonacci(num) && !cell.classList.contains("green")) {
            correctAnswers++;
            correctAnswersDisplay.innerText = correctAnswers;
            cell.classList.add("green");
        } else if (!cell.classList.contains("green")) {
            cell.classList.add("red");
            wrongAnswers++;
            wrongAnswersDisplay.innerText = wrongAnswers;
        }
        cell.removeEventListener("click", () => checkIfFibonacci(num, cell));
        if(wrongAnswers === 8){
            clearInterval(interval)
            winDeclarationDisplay.classList.remove("d-none");
            winDeclarationDisplay.classList.remove("alert-success");
            winDeclarationDisplay.classList.add("alert-danger");
            winDeclarationDisplay.innerHTML = "Your chances are over";
            gameOver = true;
        }
        if (correctAnswers === fibonacciNumbers.length) {
            clearInterval(interval);
            winDeclarationDisplay.classList.remove("d-none");
            winDeclarationDisplay.innerHTML = "Congratulations! You found all Fibonacci numbers.";
            gameOver = true;
        }
    }

    function generateRandomNumbers() {
        const maxNumber = 999;
        const numberOfNumbers = 70;
        const randomNumbers = [];
        for (let i = 0; i < numberOfNumbers; i++) {
            const randomNumber = Math.floor(Math.random() * maxNumber);
            randomNumbers.push(randomNumber);
        }
        return randomNumbers;
    }


    function generateFibonacciUnique() {
        const fibonacci = [0, 1];
        let nextTerm = 1;

        while (nextTerm < 10000) {
            fibonacci.push(nextTerm);
            nextTerm = fibonacci[fibonacci.length - 1] + fibonacci[fibonacci.length - 2];
        }

        // Shuffle the array to get random order
        for (let i = fibonacci.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [fibonacci[i], fibonacci[j]] = [fibonacci[j], fibonacci[i]];
        }
        return fibonacci;
    };
    function getRandomIndexFromFinalArray() {
        const randomNumbers = generateRandomNumbers();
        const fibonacciNumbers = generateFibonacciUnique();

        // Union of the two arrays
        const finalArray = [...new Set([...randomNumbers, ...fibonacciNumbers])];

        // Get a random index from finalArray
        const randomIndex = Math.floor(Math.random() * finalArray.length);

        return finalArray[randomIndex];
    }  

    function countdown() {
    if (timer < 0) {
        winDeclarationDisplay.classList.remove("d-none");
        winDeclarationDisplay.classList.remove("alert-success");
        winDeclarationDisplay.classList.add("alert-danger");
        winDeclarationDisplay.innerHTML = "Time's up! You found " + correctAnswers + " correct answers.";
        clearInterval(interval);
        gameOver = true;
        const cells = document.querySelectorAll("td");
            cells.forEach((cell) => {
                cell.removeEventListener("click", () => checkIfFibonacci(parseInt(cell.innerText), cell));
            });
    } else {
        timerDisplay.innerHTML = timer;
        timer--;
    }
    }
    
</script>