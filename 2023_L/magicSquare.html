---
layout: default
title: 4*4 Magic Square Game
description: A puzzle where every row, column, and diagonal adds up to the same magical sum.
---

<div class="row justify-content-center">
    <div class="col-md-3">
      <table class="table table-bordered text-center">
        <h3>Click the start button to start the game.</h3>
        <tbody id="magicSquare">
          <!-- Magic square will be generated here -->
        </tbody>
      </table>
      <button class="btn btn-primary btn-block" onclick="checkMagicSquare(1)" style="display: none;" id="yes">Is a Magic  Square</button>
      <button class="btn btn-danger btn-block" onclick="checkMagicSquare(0)" style="display: none;" id="no">Is not a Magic Square</button>
      <p id="timer" class="mt-4" style="display none">Time left: <span id="timeLeft" style="font-color:red">30</span> <span style="color: red;">seconds</span></p>
      <button class="btn btn-primary" id="startButton" onclick="startGame()">Start</button>
      <button class="btn btn-primary" id="resetButton" onclick="startGame()" disabled>Restart</button>
      <p id="result" class="mt-4"></p>
    </div>
  </div>


<script>

  let timer;
  let isMagicSquare;
  var choice;
  // Function to generate a random 4x4 magic or non-magic square
  function generateMagicSquare(choice) {

    if(choice){
      
      let square = [
        [ [1,14,15,4],[12,7,6,9],[8,11,10,5],[13,2,3,16] ],
        [ [7,12,1,14],[2,13,16,3],[11,8,5,10],[16,3,4,9] ],
        [ [5,6,19,68],[69,18,3,8],[4,7,70,17],[20,67,6,5] ],
        [ [22,12,18,87],[88,17,9,26],[10,24,89,16],[19,86,23,11] ],
        [ [26,6,4,32],[16,20,22,10],[24,12,14,18],[2,30,28,8] ],
        [ [13,8,12,1],[3,10,6,15],[2,11,7,14],[16,5,9,4] ],
        [ [2,16,15,5],[13,7,8,10],[9,11,12,6],[14,4,3,17] ],
        [ [80,25,45,20],[10,55,35,70],[15,50,30,75],[65,40,60,5] ],
        [ [9,19,20,6],[14,12,11,17],[10,16,15,13],[21,7,8,18] ],
        [ [7,12,8,19],[17,10,14,5],[18,9,13,6],[4,15,11,16] ] 
      ];
      
      var choiceForTranspose = Math.round(Math.random());
      const squarevar = Math.floor(Math.random() * 10);
      
      return square[squarevar];
    }

    let square = [
      [getRandomNumber(), getRandomNumber(), getRandomNumber(), getRandomNumber()],
      [getRandomNumber(), getRandomNumber(), getRandomNumber(), getRandomNumber()],
      [getRandomNumber(), getRandomNumber(), getRandomNumber(), getRandomNumber()],
      [getRandomNumber(), getRandomNumber(), getRandomNumber(), getRandomNumber()]
    ];

    return square;
  }
  
  // Function to get a random number between 1 and 16
  function getRandomNumber() {
    return Math.floor(Math.random() * 16) + 1;
  }

  // Function to display the magic square on the HTML page
  function displayMagicSquare(square) {
    const tbody = document.getElementById("magicSquare");
    tbody.innerHTML = "";

    for (let i = 0; i < 4; i++) {
      const row = document.createElement("tr");

      for (let j = 0; j < 4; j++) {
        const cell = document.createElement("td");
        cell.textContent = square[i][j];
        row.appendChild(cell);
      }

      tbody.appendChild(row);
    }
  }

  // Function to start the game
  function startGame() {
    choice = Math.round(Math.random());
    document.getElementById("startButton").disabled = true;
    document.getElementById('resetButton').disabled = false;
    document.getElementById('yes').style =' display : block' ;
    document.getElementById('no').style = 'display : block';
    document.getElementById('yes').disabled = false;
    document.getElementById('no').disabled = false;
    document.getElementById('timer').style = 'display : block';
    clearTimeout(timer); // Stop the timer
    const magicSquare = generateMagicSquare(choice);
    displayMagicSquare(magicSquare);
    document.getElementById("result").textContent = "";
    document.getElementById("timeLeft").textContent = "30";
    timer = setTimeout(updateTimer, 1000);
  }
  // Function to restart the game
  function restartGame() {
    clearTimeout(timer); // Stop the timer
    const magicSquare = generateMagicSquare();
    displayMagicSquare(magicSquare);
    document.getElementById("result").textContent = "";
    document.getElementById("timeLeft").textContent = "30";
    timer = setTimeout(updateTimer, 1000);
  }

  // Function to update the timer
  function updateTimer() {
    const timeLeftElement = document.getElementById("timeLeft");
    let timeLeft = parseInt(timeLeftElement.textContent);

    if (timeLeft > 0) {
      timeLeft -= 1;
      timeLeftElement.textContent = timeLeft;
      timer = setTimeout(updateTimer, 1000);
    } else {
      clearTimeout(timer);
      alert("Time's up! Refresh the page to try again.");
    }
  }

  // Function to check if the current square is a magic square
  function checkMagicSquare(button) {
    document.getElementById('yes').disabled = true;
    document.getElementById('no').disabled = true;
  clearTimeout(timer); // Stop the timer
 
  const resultElement = document.getElementById("result");
  if ((button === choice)) {
    resultElement.textContent = `Congratulations! It's ${choice === 1 ? 'a' : 'not a'} magic square.`;
  } else {
    resultElement.textContent = `Sorry! It's ${choice === 0 ? 'not a' : 'a'} magic square.`;
  }
}
</script>